{"openapi":"3.1.0","info":{"title":"СервисПро Чат","version":"1.0.0"},"paths":{"/status":{"get":{"tags":["default"],"summary":"Status","operationId":"status_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/active-chats":{"get":{"tags":["chat"],"summary":"Get Active Chats","operationId":"get_active_chats_api_active_chats_get","parameters":[{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Chat"},"title":"Response Get Active Chats Api Active Chats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/archived-chats":{"get":{"tags":["chat"],"summary":"Get Archived Chats","operationId":"get_archived_chats_api_archived_chats_get","parameters":[{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Chat"},"title":"Response Get Archived Chats Api Archived Chats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chats/{task_id}":{"get":{"tags":["chat"],"summary":"Get Chat","operationId":"get_chat_api_chats__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Chat"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chats/{task_id}/messages":{"get":{"tags":["chat"],"summary":"Get Messages","operationId":"get_messages_api_chats__task_id__messages_get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"},"title":"Response Get Messages Api Chats  Task Id  Messages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["chat"],"summary":"Create Message","operationId":"create_message_api_chats__task_id__messages_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMessageBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chats/{task_id}/messages/{message_uuid}":{"patch":{"tags":["chat"],"summary":"Edit Message","operationId":"edit_message_api_chats__task_id__messages__message_uuid__patch","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"message_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Uuid"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditMessageBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["chat"],"summary":"Delete Message","operationId":"delete_message_api_chats__task_id__messages__message_uuid__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"message_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Uuid"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chats/{task_id}/messages/{message_uuid}/buttons":{"post":{"tags":["chat"],"summary":"Use Message Button","operationId":"use_message_button_api_chats__task_id__messages__message_uuid__buttons_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"message_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Uuid"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UseMessageButtonBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Button"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/chats/{task_id}":{"get":{"tags":["admin"],"summary":"Get Chat","operationId":"get_chat_admin_chats__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Chat"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["admin"],"summary":"Create Chat","operationId":"create_chat_admin_chats__task_id__post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_chat_admin_chats__task_id__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Chat"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin"],"summary":"Delete Chat","operationId":"delete_chat_admin_chats__task_id__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/active-chats":{"post":{"tags":["admin"],"summary":"Refresh Active Chats","operationId":"refresh_active_chats_admin_active_chats_post","parameters":[{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/archived-chats/{task_id}":{"post":{"tags":["admin"],"summary":"Archive Chat","operationId":"archive_chat_admin_archived_chats__task_id__post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Chat"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/chats/{task_id}/members":{"post":{"tags":["admin"],"summary":"Change Members","operationId":"change_members_admin_chats__task_id__members_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_change_members_admin_chats__task_id__members_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Chat"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/messages/{message_uuid}":{"patch":{"tags":["admin"],"summary":"Set Status Message","operationId":"set_status_message_admin_messages__message_uuid__patch","parameters":[{"name":"message_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Uuid"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_set_status_message_admin_messages__message_uuid__patch"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/messages/{message_uuid}/buttons":{"post":{"tags":["admin"],"summary":"Use Message Button","operationId":"use_message_button_admin_messages__message_uuid__buttons_post","parameters":[{"name":"message_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Uuid"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_use_message_button_admin_messages__message_uuid__buttons_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Button"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/buttons/{button_uuid}":{"delete":{"tags":["admin"],"summary":"Remove Message Button","operationId":"remove_message_button_admin_buttons__button_uuid__delete","parameters":[{"name":"button_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Button Uuid"}},{"name":"authorization","in":"query","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ws/page":{"get":{"tags":["ws"],"summary":"Html Ws Page","operationId":"html_ws_page_ws_page_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AddMemberPayload":{"properties":{"user_id":{"type":"integer","title":"User Id"},"employee_id":{"type":"integer","title":"Employee Id"}},"type":"object","required":["user_id","employee_id"],"title":"AddMemberPayload"},"Body_change_members_admin_chats__task_id__members_post":{"properties":{"add_members":{"items":{"$ref":"#/components/schemas/AddMemberPayload"},"type":"array","title":"Add Members"},"remove_members":{"items":{"$ref":"#/components/schemas/AddMemberPayload"},"type":"array","title":"Remove Members"},"set_members":{"items":{"$ref":"#/components/schemas/AddMemberPayload"},"type":"array","title":"Set Members"}},"type":"object","required":["add_members","remove_members","set_members"],"title":"Body_change_members_admin_chats__task_id__members_post"},"Body_create_chat_admin_chats__task_id__post":{"properties":{"members":{"items":{"$ref":"#/components/schemas/AddMemberPayload"},"type":"array","title":"Members"}},"type":"object","required":["members"],"title":"Body_create_chat_admin_chats__task_id__post"},"Body_set_status_message_admin_messages__message_uuid__patch":{"properties":{"status":{"type":"string","title":"Status"}},"type":"object","required":["status"],"title":"Body_set_status_message_admin_messages__message_uuid__patch"},"Body_use_message_button_admin_messages__message_uuid__buttons_post":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"Body_use_message_button_admin_messages__message_uuid__buttons_post"},"Button":{"properties":{"uuid":{"type":"string","format":"uuid","title":"Uuid"},"employee_id":{"type":"integer","title":"Employee Id"},"name":{"type":"string","title":"Name"},"client_time":{"type":"string","format":"date-time","title":"Client Time"},"server_time":{"type":"string","format":"date-time","title":"Server Time"}},"type":"object","required":["uuid","employee_id","name","client_time","server_time"],"title":"Button"},"Chat":{"properties":{"task_id":{"type":"integer","title":"Task Id"},"message_count":{"type":"integer","title":"Message Count"},"last_message_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message Time"},"archived":{"type":"boolean","title":"Archived"},"members":{"items":{"$ref":"#/components/schemas/Member"},"type":"array","title":"Members"}},"type":"object","required":["task_id","message_count","last_message_time","archived","members"],"title":"Chat"},"CreateMessageBody":{"properties":{"text":{"type":"string","title":"Text"},"status":{"type":"string","title":"Status","default":""},"attachments":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Attachments"},"edits":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Edits"},"client_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Client Time"},"client_uuid":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Client Uuid"}},"type":"object","required":["text"],"title":"CreateMessageBody"},"EditMessageBody":{"properties":{"text":{"type":"string","title":"Text"}},"type":"object","required":["text"],"title":"EditMessageBody"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MediaFile":{"properties":{"path":{"type":"string","title":"Path"},"content_type":{"type":"string","title":"Content Type"}},"type":"object","required":["path","content_type"],"title":"MediaFile"},"Member":{"properties":{"employee_id":{"type":"integer","title":"Employee Id"},"allow_view":{"type":"boolean","title":"Allow View"},"allow_read":{"type":"boolean","title":"Allow Read"},"allow_edit":{"type":"boolean","title":"Allow Edit"}},"type":"object","required":["employee_id","allow_view","allow_read","allow_edit"],"title":"Member"},"Message":{"properties":{"uuid":{"type":"string","format":"uuid","title":"Uuid"},"client_uuid":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Client Uuid"},"employee_id":{"type":"integer","title":"Employee Id"},"text":{"type":"string","title":"Text"},"status":{"type":"string","title":"Status"},"client_time":{"type":"string","format":"date-time","title":"Client Time"},"server_time":{"type":"string","format":"date-time","title":"Server Time"},"changed":{"type":"boolean","title":"Changed"},"allow_edit":{"type":"boolean","title":"Allow Edit"},"allow_delete":{"type":"boolean","title":"Allow Delete"},"media_files":{"items":{"$ref":"#/components/schemas/MediaFile"},"type":"array","title":"Media Files"},"used_buttons":{"items":{"$ref":"#/components/schemas/Button"},"type":"array","title":"Used Buttons"}},"type":"object","required":["uuid","client_uuid","employee_id","text","status","client_time","server_time","changed","allow_edit","allow_delete"],"title":"Message"},"UseMessageButtonBody":{"properties":{"name":{"type":"string","title":"Name"},"client_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Client Time"}},"type":"object","required":["name"],"title":"UseMessageButtonBody"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
